---
title: "OCMSutility: An R package of general functions for data manipulation, analysis and visualisation"
output:
  html_document:
    toc: true
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE)
```

```{load libraries}
library(phyloseq)
```

# Overview

This package was created by member of the Oxford Centre for Microbiome Studies (OCMS). It is a collection of functions that we have found useful and hope that they are useful to others. The functions span data manipulation, statistical analysis and data visualisation, predominantly for microbiome data. Functions in this package and use cases are documented below.

## ocms_clr

ocms_clr uses the [ALDEx2](https://www.bioconductor.org/packages/release/bioc/html/ALDEx2.html) package to perform centred log-ratio transformation on a count matrix from for example 16S rRNA profiling.  

Usage:

```{r ocms_clr}

# example counts
count_dataframe <- as.data.frame(matrix(sample(0:1000, size = 10000, replace=TRUE), ncol=50, nrow=200))
clr_transformed <- ocms_clr(count_dataframe = count_dataframe, return_as_dataframe = TRUE)
```

This will return a data frame with transformed abundance estimates (most common use case). It is also possible to return the ALDEx2 object instead.

```{r ocms_clr_object}
clr_transformed <- ocms_clr(count_dataframe = count_dataframe, return_as_dataframe = FALSE)
```

## ocms_palette

This is a convenience function for getting a set of colours for plotting purposes. Setting preview=TRUE will show you the colours. The colours can be changed by adding a palette(s) to the palette argument. 

Usage:

```{r ocms_palette}

ocms_palette(n=10, palette="Set3", preview=TRUE)

```

## ocms_featurebox

This function takes a matrix of abudnances from RNA-seq or microbiome data along with a metadata dataframe and produces a boxplot for a feature(s) of interest. 

```{r ocms_featurebox}

# get example data
data(asv_example)

```